<%-include ('layouts/admin-header.ejs') %>
<nav aria-label="breadcrumb">
     <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/admin">Ana Sayfa</a></li>
       <li class="breadcrumb-item active" aria-current="page">Kategoriler</li>
       
     </ol>
</nav>


<div class="container-fluid">
     <h3>Kategoriler</h3>
     <div class="row">
          <div class="col-md-4">
               <table class="table">
                    <tbody>
                    <%categories.forEach( (category, index)=> { %>
                      <tr>
                        <th scope="row"><%=index + 1%></th>
                        <td><%=category.title%></td>
                        <td class="text-end">
                             <a href="/admin/category/<%=index%>" class="btn btn-sm <%= (selectedIndex == index ? "btn-danger disabled" : "btn-warning")  %>"><i class="fas fa-eye"></i></a>
                         </td>
                      </tr>
                    <%})%>
                    </tbody>
               </table>
          </div>
          <div class="col-md-8">             
               <div class="card bg-warning">
                    <form action="/admin/category/add" method="post">
                         <div class="card-body">
                              <div class="row">
                                   <div class="col-sm-7">
                                        <input type="text" class="form-control" id="title" name="title" placeholder="Kategori Adı" required>
                                   </div>
                                   <div class="col-sm-3">
                                        <input type="number" class="form-control" id="seq" name="seq" placeholder="Sıra">
                                   </div>
                                   <div class="col-sm-2">
                                        <button type="submit" class="btn btn-success w-100"><i class="fas fa-plus"></i> Ekle</button>
                                   </div>
                              </div>
                         
                         </div>
                    </form>
               </div>
          
               <% if (categories.length>0) {%>
          
               <div class="card mt-5">
                    <form action="/admin/category/update" method="post">
                         <input type="hidden" name="id" value="<%=categories[selectedIndex].category_id%>">
                         <div class="card-header">
                              Güncelle
                         </div>
                         <div class="card-body">
                              <div class="mb-3">
                                   <label for="name" class="form-label">Adı</label>
                                   <input type="text" class="form-control" id="title" name="title" value="<%=categories[selectedIndex].title%>" required>
                              </div>
                              <div class="mb-3">
                                   <label for="seq" class="form-label">Sıra</label>
                                   <input type="number" class="form-control" id="seq" name="seq" value="<%=categories[selectedIndex].seq%>" required>
                              </div>
                         </div>
                         <div class="card-footer text-end">
                              <button type="submit" name="btnUpdate" class="btn btn-warning"><i class="fas fa-save"></i> Kaydet</button>
                              <a href="/admin/category/delete/<%=categories[selectedIndex].category_id%>" class="btn btn-danger"><i class="fas fa-trash"></i> Sil</a>
                         </div>
                    </form>
               </div>

               <%}%>
               

               
          </div>
     </div> 

</div>


<%-include ('layouts/admin-footer.ejs') %>